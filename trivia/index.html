<!DOCTYPE html>

<html lang="en">
    <head>
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap" rel="stylesheet">
        <link href="styles.css" rel="stylesheet">
        <title>Trivia!</title>
        <script>
            // TODO: Add code to check answers to questions
            // see my scripts above the closing body tag below
        </script>
    </head>
    <body>
        <div class="header">
            <h1>Trivia!</h1>
        </div>

        <div class="container">
            <div class="section">
                <h2>Part 1: Multiple Choice </h2>
                <hr>
                <!-- TODO: Add multiple choice question here -->
                <h3>In total, how many major volcanic eruptions have occurred in Iceland since the year 2000?</h3>
                <p id="question1-alert" class="question-alert"></p>
                <div id="answer-btn-wrapper" class="btn-wrapper">
                    <button type="button" id="answr1-btn" class="qa btn answer-btn" value="5">5 Eruptions</button>
                    <button type="button" id="answr2-btn" class="qa btn answer-btn" value="7">7 Eruptions</button>
                    <button type="button" id="answr3-btn" class="qa btn answer-btn" value="23">23 Eruptions</button>
                    <button type="button" id="answr4-btn" class="qa btn answer-btn" value="13">13 Eruptions</button>
                </div>
            </div>

            <div class="section">
                <h2>Part 2: Free Response</h2>
                <hr>
                <!-- TODO: Add free response question here -->
                <h3>The Cathedral of Santa Maria del Fiore (Duomo di Firenze) is Florence's most famous church.
                    In what year did construction began?</h3>
                    <p id="question2-alert" class="question-alert"></p>
                <form>
                    <input type="text" id="question2-input" pattern="^\d{4}$" class="question" placeholder="Type your answer to the year here."  />
                    <button type="button" id="question2-btn" class="qa btn question-btn">Check Answer</button>
                </form>
            </div>
        </div>
        <script>
            // Execute code after DOM is loaded
            document.addEventListener('DOMContentLoaded', function() {

                // capture a node list of all buttons with class .qa
                const qaBtns = document.querySelectorAll('.qa');
                // capture a node list of all q1 buttons
                const qa1Btns = document.querySelectorAll('.answer-btn');
                // store result responses
                const correctResponse = "Correct";
                const incorrectResponse = "Incorrect";

                // START: loop through the button node list
                qaBtns.forEach(function(button) {
                    // START: assign click event listener to those buttons
                    button.addEventListener('click', function() {
                        // capture the id of the element clicked
                        const clickedId = event.target.id;

                        // reset all q1 buttons to their default color on next click
                        qa1Btns.forEach(function(btn) {
                            btn.style.backgroundColor = '#d9edff';
                        });

                        // if question 2 button clicked
                        if(button.id === "question2-btn"){
                            const qst2Answer = document.querySelector("#question2-input");
                            if(qst2Answer.value === "1296"){
                                // console.log("1296");
                                // alert user to result, set bg color to green
                                document.querySelector("#question2-alert").innerHTML=correctResponse;
                                document.querySelector("#question2-alert").style.color = '#33cc33';
                                document.querySelector("#question2-input").style.backgroundColor = '#00ff00';
                            } else {
                                // console.log("NOT 1296");
                                // alert user to incorrect result, set bg color to red
                                document.querySelector("#question2-alert").innerHTML=incorrectResponse;
                                document.querySelector("#question2-alert").style.color = '#ff8080';
                                document.querySelector("#question2-input").style.backgroundColor = '#ff8080';
                            }

                        } else if(button.id !== "answr4-btn"){
                            // console.log("Wrong Year");
                            // alert user to incorrect result, set bg color to red
                            document.querySelector("#question1-alert").innerHTML=incorrectResponse;
                            document.querySelector("#question1-alert").style.color = '#ff8080';
                            document.querySelector(`#${clickedId}`).style.backgroundColor = '#ff8080';
                        } else {
                            // console.log("Correct Year");
                            // alert user to result, set bg color to green
                            document.querySelector("#question1-alert").innerHTML=correctResponse;
                            document.querySelector("#question1-alert").style.color = '#33cc33';
                            document.querySelector("#answr4-btn").style.backgroundColor = '#00ff00';
                        }
                    });
                    // END: assign click event listener to those buttons
                });
                // END: loop through the button node list
            });
        </script>
    </body>
</html>
